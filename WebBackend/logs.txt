[SYSTEM] Applying Database Migrations...
info: Microsoft.EntityFrameworkCore.Migrations[20411]
      Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2026-01-04 02:40:39.163395+00:00');
      SELECT changes();
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
          "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
          "ProductVersion" TEXT NOT NULL
      );
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "MigrationId", "ProductVersion"
      FROM "__EFMigrationsHistory"
      ORDER BY "MigrationId";
info: Microsoft.EntityFrameworkCore.Migrations[20405]
      No migrations were applied. The database is already up to date.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      DELETE FROM "__EFMigrationsLock";
[SYSTEM] Database Migrations Applied Successfully.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT EXISTS (
          SELECT 1
          FROM "News" AS "n"
          WHERE "n"."Title" = '补丁说明：更新 1.2 - 启程')
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[@__initialOwnerName_0='?' (Size = 6)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."AccessLevel", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Points", "u"."Username"
      FROM "Users" AS "u"
      WHERE "u"."Username" = @__initialOwnerName_0
      LIMIT 1
[SYSTEM] User 'sotmay' is already Owner.
warn: Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository[60]
      Storing keys in a directory '/root/.aspnet/DataProtection-Keys' that may not be persisted outside of the container. Protected data will be unavailable when container is destroyed. For more information go to https://aka.ms/aspnet/dataprotectionwarning
info: StoryOfTime.Server.Services.ServerMonitoringService[0]
      Server Monitoring Service is starting.
warn: Microsoft.EntityFrameworkCore.Query[10103]
      The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "g"."Id", "g"."AuthDatabase", "g"."AuthServiceName", "g"."CharactersDatabase", "g"."Host", "g"."Password", "g"."Port", "g"."SoapHost", "g"."SoapPassword", "g"."SoapPort", "g"."SoapUsername", "g"."SshHost", "g"."SshPassword", "g"."SshPort", "g"."SshUsername", "g"."Username", "g"."WorldServiceName"
      FROM "GameServerSettings" AS "g"
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__cutoff_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT EXISTS (
          SELECT 1
          FROM "ServerStatusLogs" AS "s"
          WHERE "s"."Timestamp" < @__cutoff_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 7), @p4='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ServerStatusLogs" ("CpuUsage", "MemoryUsage", "OnlinePlayers", "Status", "Timestamp")
      VALUES (@p0, @p1, @p2, @p3, @p4)
      RETURNING "Id";
info: StoryOfTime.Server.Services.ServerMonitoringService[0]
      Recorded server status: 0 players online.
warn: Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager[35]
      No XML encryptor configured. Key {d85a4502-b4cf-41f5-bb66-47ac17872431} may be persisted to storage in unencrypted form.
warn: Microsoft.AspNetCore.Hosting.Diagnostics[15]
      Overriding HTTP_PORTS '8080' and HTTPS_PORTS ''. Binding to values defined by URLS instead 'http://+:8080'.
info: Microsoft.Hosting.Lifetime[14]
      Now listening on: http://[::]:8080
info: Microsoft.Hosting.Lifetime[0]
      Application started. Press Ctrl+C to shut down.
info: Microsoft.Hosting.Lifetime[0]
      Hosting environment: Production
info: Microsoft.Hosting.Lifetime[0]
      Content root path: /app
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "g"."Id", "g"."AuthDatabase", "g"."AuthServiceName", "g"."CharactersDatabase", "g"."Host", "g"."Password", "g"."Port", "g"."SoapHost", "g"."SoapPassword", "g"."SoapPort", "g"."SoapUsername", "g"."SshHost", "g"."SshPassword", "g"."SshPort", "g"."SshUsername", "g"."Username", "g"."WorldServiceName"
      FROM "GameServerSettings" AS "g"
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__cutoff_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT EXISTS (
          SELECT 1
          FROM "ServerStatusLogs" AS "s"
          WHERE "s"."Timestamp" < @__cutoff_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 7), @p4='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ServerStatusLogs" ("CpuUsage", "MemoryUsage", "OnlinePlayers", "Status", "Timestamp")
      VALUES (@p0, @p1, @p2, @p3, @p4)
      RETURNING "Id";
info: StoryOfTime.Server.Services.ServerMonitoringService[0]
      Recorded server status: 0 players online.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "g"."Id", "g"."AuthDatabase", "g"."AuthServiceName", "g"."CharactersDatabase", "g"."Host", "g"."Password", "g"."Port", "g"."SoapHost", "g"."SoapPassword", "g"."SoapPort", "g"."SoapUsername", "g"."SshHost", "g"."SshPassword", "g"."SshPort", "g"."SshUsername", "g"."Username", "g"."WorldServiceName"
      FROM "GameServerSettings" AS "g"
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__cutoff_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT EXISTS (
          SELECT 1
          FROM "ServerStatusLogs" AS "s"
          WHERE "s"."Timestamp" < @__cutoff_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 7), @p4='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ServerStatusLogs" ("CpuUsage", "MemoryUsage", "OnlinePlayers", "Status", "Timestamp")
      VALUES (@p0, @p1, @p2, @p3, @p4)
      RETURNING "Id";
info: StoryOfTime.Server.Services.ServerMonitoringService[0]
      Recorded server status: 0 players online.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT "u"."Id", "u"."AccessLevel", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Points", "u"."Username"
      FROM "Users" AS "u"
      WHERE "u"."Id" = @__p_0
      LIMIT 1
fail: Microsoft.AspNetCore.Server.Kestrel[13]
      Connection id "0HNIB7BU2PMDV", Request id "0HNIB7BU2PMDV:00000001": An unhandled exception was thrown by the application.
      Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 
      
      StoryOfTime.Server.Controllers.GameSettingsController.GetSettings (StoryOfTime.Server)
      StoryOfTime.Server.Controllers.SettingsController.GetGameSettings (StoryOfTime.Server)
         at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(Span`1 candidateState)
         at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, Span`1 candidateState)
         at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, Span`1 candidateState)
         at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.MatchAsync(HttpContext httpContext)
         at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
         at Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware.Invoke(HttpContext context)
         at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "g"."Id", "g"."AuthDatabase", "g"."AuthServiceName", "g"."CharactersDatabase", "g"."Host", "g"."Password", "g"."Port", "g"."SoapHost", "g"."SoapPassword", "g"."SoapPort", "g"."SoapUsername", "g"."SshHost", "g"."SshPassword", "g"."SshPort", "g"."SshUsername", "g"."Username", "g"."WorldServiceName"
      FROM "GameServerSettings" AS "g"
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__cutoff_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."CpuUsage", "s"."MemoryUsage", "s"."OnlinePlayers", "s"."Status", "s"."Timestamp"
      FROM "ServerStatusLogs" AS "s"
      WHERE "s"."Timestamp" >= @__cutoff_0
fail: Microsoft.AspNetCore.Server.Kestrel[13]
      Connection id "0HNIB7BU2PME3", Request id "0HNIB7BU2PME3:00000001": An unhandled exception was thrown by the application.
      Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 
      
      StoryOfTime.Server.Controllers.GameSettingsController.GetSettings (StoryOfTime.Server)
      StoryOfTime.Server.Controllers.SettingsController.GetGameSettings (StoryOfTime.Server)
         at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(Span`1 candidateState)
         at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, Span`1 candidateState)
         at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, Span`1 candidateState)
         at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.MatchAsync(HttpContext httpContext)
         at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
         at Microsoft.AspNetCore.HostFiltering.HostFilteringMiddleware.Invoke(HttpContext context)
         at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "g"."Id", "g"."AuthDatabase", "g"."AuthServiceName", "g"."CharactersDatabase", "g"."Host", "g"."Password", "g"."Port", "g"."SoapHost", "g"."SoapPassword", "g"."SoapPort", "g"."SoapUsername", "g"."SshHost", "g"."SshPassword", "g"."SshPort", "g"."SshUsername", "g"."Username", "g"."WorldServiceName"
      FROM "GameServerSettings" AS "g"
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__cutoff_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT "s"."Id", "s"."CpuUsage", "s"."MemoryUsage", "s"."OnlinePlayers", "s"."Status", "s"."Timestamp"
      FROM "ServerStatusLogs" AS "s"
      WHERE "s"."Timestamp" >= @__cutoff_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "g"."Id", "g"."AuthDatabase", "g"."AuthServiceName", "g"."CharactersDatabase", "g"."Host", "g"."Password", "g"."Port", "g"."SoapHost", "g"."SoapPassword", "g"."SoapPort", "g"."SoapUsername", "g"."SshHost", "g"."SshPassword", "g"."SshPort", "g"."SshUsername", "g"."Username", "g"."WorldServiceName"
      FROM "GameServerSettings" AS "g"
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__cutoff_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT EXISTS (
          SELECT 1
          FROM "ServerStatusLogs" AS "s"
          WHERE "s"."Timestamp" < @__cutoff_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 7), @p4='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ServerStatusLogs" ("CpuUsage", "MemoryUsage", "OnlinePlayers", "Status", "Timestamp")
      VALUES (@p0, @p1, @p2, @p3, @p4)
      RETURNING "Id";
info: StoryOfTime.Server.Services.ServerMonitoringService[0]
      Recorded server status: 0 players online.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "g"."Id", "g"."AuthDatabase", "g"."AuthServiceName", "g"."CharactersDatabase", "g"."Host", "g"."Password", "g"."Port", "g"."SoapHost", "g"."SoapPassword", "g"."SoapPort", "g"."SoapUsername", "g"."SshHost", "g"."SshPassword", "g"."SshPort", "g"."SshUsername", "g"."Username", "g"."WorldServiceName"
      FROM "GameServerSettings" AS "g"
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__cutoff_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT EXISTS (
          SELECT 1
          FROM "ServerStatusLogs" AS "s"
          WHERE "s"."Timestamp" < @__cutoff_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 7), @p4='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ServerStatusLogs" ("CpuUsage", "MemoryUsage", "OnlinePlayers", "Status", "Timestamp")
      VALUES (@p0, @p1, @p2, @p3, @p4)
      RETURNING "Id";
info: StoryOfTime.Server.Services.ServerMonitoringService[0]
      Recorded server status: 0 players online.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT "g"."Id", "g"."AuthDatabase", "g"."AuthServiceName", "g"."CharactersDatabase", "g"."Host", "g"."Password", "g"."Port", "g"."SoapHost", "g"."SoapPassword", "g"."SoapPort", "g"."SoapUsername", "g"."SshHost", "g"."SshPassword", "g"."SshPort", "g"."SshUsername", "g"."Username", "g"."WorldServiceName"
      FROM "GameServerSettings" AS "g"
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__cutoff_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT EXISTS (
          SELECT 1
          FROM "ServerStatusLogs" AS "s"
          WHERE "s"."Timestamp" < @__cutoff_0)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 7), @p4='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "ServerStatusLogs" ("CpuUsage", "MemoryUsage", "OnlinePlayers", "Status", "Timestamp")
      VALUES (@p0, @p1, @p2, @p3, @p4)
      RETURNING "Id";
info: StoryOfTime.Server.Services.ServerMonitoringService[0]
      Recorded server status: 0 players online.
root@C202505021688310:~/sotweb# 